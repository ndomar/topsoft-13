<div class="flash">
	<%= flash[:notice] %>
	<%= flash[:error] %>
</div>

<%= link_to("Back to View All Groups", {:action => 'index'}, :class => 'back-link') %>

<div>
      <p>
            <b>Name:</b>
            <%= @group.group_name %>
      </p>

      <p>
            <b>Description:</b>
            <%= @group.description %>
      </p>

      <p>
            <b>created_at:</b>
            <%= @group.created_at %>
      </p>

      <p>
            <b>last updated_at:</b>
            <%= @group.updated_at %>
      </p>

      <div>

            <% if ifMember(@group.id, 1) == false %>
            <%= button_to("join",{:helper => 'group_users', :action =>'join', :id => @group.id, :user_id => 1}, :class => 'action show') %>
            <% end %>

            <% if ifMember(@group.id, 1) == true && isGroupCreator(@group.id, 1) != true %>
            <%= button_to("leave Group",{:helper => 'group_users', :action =>'leave', :id => @group.id}, :class => 'action show') %>               
            <% end %>

            <% if isGroupCreator(@group.id, 1) == true %>
            <%= button_to("Delete Group", {:action => 'destroy', :id => @group.id}, :helper => GroupUsersHelper, :confirm => 'Are you sure you want to delete this group?', :class => 'action delete') %>
            <% end %>
      </div>
</div>



            <div id = "posts">
                  <table border = 1>
                        <th>Posts</th>
                        <th>Comments</th>

                        <% @group.posts.each do |post| %>
                        <tr>
                              <td> <%= post.content %></td>
                              <% post.comments.each do |comment| %>
                                    <td><%= comment.comment %></td>
                                    <% end %>
                                     <% if ifMember(params[:id],1)==true %>
                                      <%= form_for(:comment, :url => {:controller => 'comments',:action => 'createComment', :id => params[:comment_id]}) do |f| %>
                                      <td><%= f.text_field (:comment), :placeholder =>"add you comment" %></td>
                                      <%= f.hidden_field :post_id, :value => post.id%>
                                       <td >
                                       <%= submit_tag("Create Comment") %>
                                    </td>
                                      <% end %>
                                      <% end %>

                        </tr>
                        <% end %>
                  </table>
  
<div>
   <% if ifMember(params[:id],1)==true %>

  <%= form_for(:post, :url => {:controller => 'posts',:action => 'createPost', :id => params[:id]}, :html => {:id => "post-form"}) do |f| %>


  <table summary = "The Post">
    

    <tr>
      <th>Post Content</th>
      <td><%= f.text_field (:content) %></td>
    </tr>

     <tr>
    <th><%= f.hidden_field :group_id, :value => @group_id%> </th>
    
  </tr>
  </table>
  

  <div class="form-buttons">
    <%= submit_tag("Create Post") %>
  </div>

  <% end %>

 <% end %>
</div>



